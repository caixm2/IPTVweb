<!DOCTYPE html>
<html lang="en">
<head>
    {#  烽火的周报显示界面，之后等周报部门算法完成后编辑  #}
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="/static/bootstrap/css/bootstrap-theme.css">
    <script src='/static/jquery/jquery.js'></script>
    <script src='/static/jquery/highcharts.js'></script>
    <title>周报查询结果</title>
    <style type="text/css">
        .div{position:absolute;margin-left: 20px;top:107px;font-size: 14px;}
        {#表格框主体数据宽高#}
	    td {
		    line-height: 25px;
		    text-align:center;
	    }
        {#表格框左第一格数据宽高#}
	    td:first-child{
		    background-color: grey;
	    }
        {#表格头数据宽高#}
        th {
		    line-height: 60px;
		    text-align:center;
		    background-color: darkgrey;
	    }

	</style>
    <script type="text/javascript">
	 var pre_scrollTop = 0;  // 滚动条事件之前文档滚动高度
	 var obj_topic ;
	 var scroll_top;
	 window.onload = function(){
        pre_scrollTop = (document.documentElement.scrollTop);
	 	obj_topic = document.getElementById("topic");
	 	var tbl = document.getElementById("table");
	 	var trs = tbl.getElementsByTagName("tr");
        {#这个方法是判断单元格颜色#}
	 	for (var i = 1; i < trs.length ; i++) {
            var _tr = trs[i]
            var tds = _tr.getElementsByTagName('td');
{#             把中间哪部门数字做成整数型 #}
            for(var a = 1; a <= 10; a ++ ) {
                var _td = tds[a];
                var tdDiv = _td.getElementsByTagName('div');
                if(tdDiv[0].innerHTML > 10000000)
                    tdDiv[0].innerHTML = ''
                else
                    tdDiv[0].innerHTML = parseInt(tdDiv[0].innerHTML)
            }

{#            for(var j = 4; j <= 13; j += 3) {#}
{#                var _td = tds[j];#}
{#                var tdDiv = _td.getElementsByTagName('div');#}
{#                tdDiv[0].innerHTML = parseInt(tdDiv[0].innerHTML)#}
{#                if (tdDiv[0].innerHTML >= 90)#}
{#                    _td.style.backgroundColor = 'pink';#}
{#                else if (tdDiv[0].innerHTML < 20)#}
{#                    _td.style.backgroundColor = 'yellow';#}
{#            }#}
        }
	 }

	 window.onscroll = function(){
         {#因为google有个bug，不认可documentElement，所以要先判断兼容#}
         if (document.documentElement && document.documentElement.scrollTop)
             scroll_top = document.documentElement.scrollTop;
         else if (document.body)
             scroll_top = document.body.scrollTop;
        {#这个方法是冻结表头#}
         if(pre_scrollTop != (scroll_top)){
	 		pre_scrollTop = (scroll_top);

	 		if(pre_scrollTop > 107){
                obj_topic.style.top = pre_scrollTop+"px";
	 		}else {
	 		    obj_topic.style.top = 107+"px";
            }
	 	}
	 }
    </script>
</head>
<body>
    <h2 style="margin-left: 20px">查询得到{{ info.wRptstartdate }}到{{ info.wRptenddate }}的数据</h2>
    <p class="form-actions" style="position:relative;left: 20px;top: 10px">
        <a href="JavaScript:history.back(-1)"><input type="button" value="返回" class="btn btn-danger"></a>
        <a href="../download?platformname={{ info.platformname }}&wRptstartdate={{ info.wRptstartdate }}&wRptenddate={{ info.wRptenddate }}&day={{ info.day }}"><input type="button" value="下载" class="btn btn-info"></a>
    </p>

    <div id="topic" class="div">
        <table cellpadding="0" cellspacing="0" border="1" style="width:1920px;font-size: 13px">
            <thead>
            <tr id="topic">
                <th width="200">日期</th>
                <th>流媒体并发(个)</th>
                <th>epg并发(个)</th>
                <th>流量数据(GBps)</th>
                <th>芒果tv(Mbps)</th>
                <th>4k(Mbps)</th>
                <th>优酷(Mbps)</th>
                <th>机顶盒下载(Mbps)</th>
                <th>百事通回源(Mbps)</th>
                <th>测速(Mbps)</th>
                <th>播播(Mbps)</th>
                <th>天翼视讯(Mbps)</th>
                <th>教育中心(Mbps)</th>
                <th>华数(Mbps)</th>
                <th>嘉攸(Mbps)</th>
                <th>嘉攸直播(Mbps)</th>
            </tr>
            </thead>
        </table>
    </div>

    <table id="table" cellpadding="0" cellspacing="0" border="1" style="width:1920px;margin-left: 20px;font-size: 13px;">
        <thead>
        <tr id="title">
            <th width="200">日期</th>
            <th>流媒体并发(个)</th>
            <th>epg并发(个)</th>
            <th>流量数据(GBps)</th>
            <th>芒果tv(Mbps)</th>
            <th>4k(Mbps)</th>
            <th>优酷(Mbps)</th>
            <th>机顶盒下载(Mbps)</th>
            <th>百事通回源(Mbps)</th>
            <th>测速(Mbps)</th>
            <th>播播(Mbps)</th>
            <th>天翼视讯(Mbps)</th>
            <th>教育中心(Mbps)</th>
            <th>华数(Mbps)</th>
            <th>嘉攸(Mbps)</th>
            <th>嘉攸直播(Mbps)</th>
        </tr>
        </thead>

        <tbody>
        {% for x in form.data %}
            <tr id="body" style="position: static;top: 100px;">
                {% for y in x %}
                    <td>
                        <div contenteditable="false">
                            {{ y }}
                        </div>
                    </td>
                {% endfor %}
            </tr>
        {% endfor %}
        </tbody>
    </table>

</body>
</html>